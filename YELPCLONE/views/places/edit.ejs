<% layout('layouts/app') %>
<h1 class="text-center">Update Place</h1>
<div class="col-6 offset-3">
    <form action="/places/<%= place._id %>?_method=PUT" method="POST" class="validated-form" novalidate>
        <div class="mb-3">
            <label for="title" class="form-label">Title</label>
            <input
                type="text"
                id="title"
                name="place[title]"
                class="form-control"
                value="<%= place.title %>"
                required
            />
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="location" class="form-label">Location</label>
            <input
                type="text"
                id="location"
                name="place[location]"
                class="form-control"
                value="<%= place.location %>"
                required
            />
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="description" class="form-label">description</label>
            <textarea
                id="description"
                name="place[description]"
                class="form-control"
            >
<%= place.title %></textarea
            >
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="price" class="form-label">Price</label>
            <input
                type="text"
                id="price"
                name="place[price]"
                class="form-control"
                value="<%= place.price %>"
                required
            />
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <div class="mb-3">
            <label for="image" class="form-label">Image Url</label>
            <input
                type="text"
                id="image"
                name="place[image]"
                class="form-control"
                value="<%= place.image %>"
                required
            />
            <div class="valid-feedback">Looks good!</div>
            <div class="invalid-feedback">Please fill out this field.</div>
        </div>
        <button type="submit" class="btn btn-success">Add Place</button>
    </form>
</div>
<script>
    // Example starter JavaScript for disabling form submissions if there are invalid fields
    (() => {
        "use strict";

        // Fetch all the forms we want to apply custom Bootstrap validation styles to
        const forms = document.querySelectorAll(".validated-form");

        // Loop over them and prevent submission
        Array.from(forms).forEach((form) => {
            form.addEventListener(
                "submit",
                (event) => {
                    if (!form.checkValidity()) {
                        event.preventDefault();
                        event.stopPropagation();
                    }

                    form.classList.add("was-validated");
                },
                false
            );
        });
    })();
</script>
